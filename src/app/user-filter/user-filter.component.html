<div class="user-filter-container">
  <form [formGroup]="userFilterForm" class="form-class">
    <!-- Row 1 -->
    <div class="form-row">
      <!-- courseId -->
      <div class="form-group">
        <label for="courseId">Course ID</label>
        <input
          id="courseId"
          formControlName="courseId"
          type="text"
          class="form-control"
          placeholder="Enter Course ID"
          required
        />
      </div>

      <!-- batchId -->
      <div class="form-group">
        <label for="batchId">Batch ID</label>
        <input
          id="batchId"
          formControlName="batchId"
          type="text"
          class="form-control"
          placeholder="Enter Batch ID"
          required
        />
      </div>
    </div>

    <!-- Row 2 -->
    <div class="form-row">
      <!-- userId -->
      <div class="form-group">
        <label for="userId">User ID</label>
        <input
          id="userId"
          formControlName="userId"
          type="text"
          class="form-control"
          placeholder="Enter User ID"
          required
        />
      </div>

      <!-- location -->
      <div class="form-group">
        <label for="location">Location</label>
        <input
          id="location"
          formControlName="location"
          type="text"
          class="form-control"
          placeholder="Enter Location"
          required
        />
      </div>
    </div>

    <!-- Row 3 -->
    <div class="form-row">
      <!-- totalLeafNodecount -->
      <div class="form-group">
        <label for="totalLeafNodecount">Total Leaf Node Count</label>
        <input
          id="totalLeafNodecount"
          formControlName="totalLeafNodecount"
          type="number"
          class="form-control"
          placeholder="Enter Total Leaf Node Count"
          required
        />
      </div>

      <!-- progress -->
      <div class="form-group">
        <label for="progress">Progress</label>
        <input
          id="progress"
          formControlName="progress"
          type="number"
          class="form-control"
          placeholder="Enter Progress"
          required
        />
      </div>
    </div>

    <!-- Row 4 -->
    <div class="form-row">
      <!-- batchEnrollmentDate -->
      <div class="form-group">
        <label for="batchEnrollmentDate">Batch Enrollment Date</label>
        <input
          id="batchEnrollmentDate"
          formControlName="batchEnrollmentDate"
          type="date"
          class="form-control"
        />
      </div>

      <!-- lastAccessTime -->
      <div class="form-group">
        <label for="lastAccessTime">Last Access Time</label>
        <input
          id="lastAccessTime"
          formControlName="lastAccessTime"
          type="date"
          class="form-control"
        />
      </div>
    </div>

    <!-- Row 5 -->
    <div class="form-row">
      <!-- lastCompletedTime -->
      <div class="form-group">
        <label for="lastCompletedTime">Last Completed Time</label>
        <input
          id="lastCompletedTime"
          formControlName="lastCompletedTime"
          type="date"
          class="form-control"
        />
      </div>

      <!-- lastUpdatedTime -->
      <div class="form-group">
        <label for="lastUpdatedTime">Last Updated Time</label>
        <input
          id="lastUpdatedTime"
          formControlName="lastUpdatedTime"
          type="date"
          class="form-control"
        />
      </div>
    </div>

    <!-- Fields to include in the response -->
    <div class="form-group2">
      <label>Fields to Include in Response:</label>
      <div>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="userId"
          />
          User ID
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="courseId"
          />
          Course ID
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="location"
          />
          Location
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="progress"
          />
          Progress
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="batchid"
          />
          Batch ID
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="totalLeafNodecount"
          />
          total Leaf Node count
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="completedContents"
          />
          completedContents
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="batchEnrollmentDate"
          />
          batch Enrollment Date
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="lastAccessTime"
          />
          lastAccessTime
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="lastCompletedTime"
          />
          lastCompletedTime
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="lastUpdatedTime"
          />
          lastUpdatedTime
        </label>
        <label>
          <input
            type="checkbox"
            (change)="onFieldChange($event)"
            value="viewCount"
          />
          viewCount
        </label>
      </div>
    </div>
    <button type="submit" class="btn btn-primary" (click)="onSubmit()">
      Submit
    </button>
  </form>

  <div *ngIf="apiResponse">
    <h3>Users Found: {{ apiResponse.result.count }}</h3>
    <ul>
      <li *ngFor="let user of apiResponse.result.users">
        <ng-container *ngFor="let key of getObjectKeys(user)">
          <p>
            <strong>{{ key }}:</strong> {{ user[key] }}
          </p>
        </ng-container>
        <hr />
      </li>
    </ul>
  </div>
  <div *ngIf="errorMessage" class="error">
    <p>{{ errorMessage }}</p>
  </div>
</div>
